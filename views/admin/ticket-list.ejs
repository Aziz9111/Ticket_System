<%- include("../includes/head") , { title: 'All Tickets' } %>
<link rel="stylesheet" href="/styles/ticket.css" />
<link rel="stylesheet" href="/styles/navbar.css" />

<body>
  <%- include('../includes/header') %>

  <main>
    <h1>جميع التذاكر</h1>
    <form action="/admin/search" method="GET" class="search-form">
      <input
        type="text"
        name="query"
        placeholder="ابحث عن تذكرة..."
        id="search-input"
        required
      />
      <button type="submit" class="search-btn">بحث</button>
    </form>

    <!-- Responsive table container -->
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>الايميل الخاص بالمستخدم</th>
            <th>عنوان التذكرة</th>
            <th>وصف التذكرة</th>
            <th>تعديل</th>
            <th>رد وتعيين</th>
          </tr>
        </thead>
        <tbody>
          <% tickets.forEach((ticket, index) => { %>
          <tr>
            <td><%= index + 1 %></td>
            <td><%= ticket.user_email %></td>
            <td><%= ticket.title %></td>
            <td><%= ticket.description %></td>
            <td>
              <a href="/admin/ticket/<%= ticket.id %>" class="btn-link"
                >تعديل</a
              >
            </td>
            <td>
              <a href="/admin/assign-ticket/<%= ticket.id %>" class="btn-link"
                >رد وتعيين</a
              >
            </td>
          </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
  </main>

  <%- include("../includes/footer") %>
</body>
